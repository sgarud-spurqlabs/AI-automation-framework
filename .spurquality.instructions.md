---
name: spurquality_test_management
description: Guidelines for using SpurQuality Test Management tool through MCP integration for comprehensive test lifecycle management
applyTo: "requirements/*.*, test-plans/*.*, test-cases/*.*, **/*.java,**/*.feature,**/*.json,**/*.csv,**/*.xlsx,**/*.md"
---

# SpurQuality Test Management Guidelines

```yaml
overview:
  purpose: "Comprehensive test lifecycle management through MCP integration"
  organization_required: true
  project_required: true
  supported_formats: ["JSON", "CSV", "Excel", "Gherkin Feature files"]

authentication:
  organization: "Required for all operations"
  project_name: "Required for all operations" 
  credentials: "Configured through MCP server"

default_values:
  organization: "Pilot"
  projectName: "Orange"
  folder: "Functional"
  author: "Shubham Chikane"
  assigneeName: "Shubham Chikane"
  issueType: "manual"
  fixVersion: "1.0.0"
  note: "Use these defaults when values are not explicitly provided"

project_and_requirement_retrieval:
  get_project_list:
    tool: "getProjectList"
    required_fields:
      - organization
  
  get_epic_details:
    tool: "getEpicDetails"
    required_fields:
      - organization
      - projectName
      - epicId
  
  get_story_details:
    tool: "getStoryDetails"
    required_fields:
      - organization
      - projectName
      - storyId

test_plan_management:
  create_test_plan:
    tool: "createTestPlan"
    required_fields:
      - organization
      - projectName
      - name
    optional_fields:
      - assigneeName
      - endDate
      - startDate
      - fixVersion
      - issueType
      - labels
      - reporterName
      - testIds
      - testPlanDescription
      - testPlanStatus
      - testPlanSummary
    date_format: "YYYY-MM-DD or ISO format"
  
  retrieve_test_plans:
    tool: "getTestPlan"
    filters:
      - testPlanId
      - status
      - startDate
      - endDate
    pagination:
      - limit
      - skip
  
  get_requirements_for_test_plan:
    tool: "getRequirementsForTestPlan"
    required_fields:
      - organization
      - projectName
      - testPlanId
  
  get_test_cases_for_test_plan:
    tool: "getTestCasesForTestPlan"
    required_fields:
      - organization
      - projectName
      - testPlanId
  
  add_test_cases:
    tool: "addTestCasesToTestPlan"
    required_fields:
      - testName
      - folder
      - author
      - tcp
    optional_fields:
      - testId
  
  remove_test_cases:
    tool: "removeTestCaseFromTestPlan"
    parameters:
      - testPlanId
      - testId
  
  link_requirements:
    tool: "linkRequirementsToTestPlan"
    requirement_types:
      - epic
      - story
      - bug
    parameters:
      - testPlanId
      - type
      - id
  
  remove_requirement:
    tool: "removeRequirementFromTestPlan"
    required_fields:
      - organization
      - projectName
      - testPlanId
      - requirementId

test_case_management:
  create_from_file:
    tool: "createTestCaseFromFile"
    supported_formats:
      - JSON
      - CSV
      - Excel
      - Gherkin_Feature
    required_fields:
      - organization
      - projectName
      - folder
      - author
    note: "When calling via MCP/HTTP, pass the actual file content using `fileContent` (string) and include `fileName`. Do NOT assume remote agents can access local filesystem paths; avoid passing local `filePath` unless the MCP executor explicitly supports reading that path."
    optional_fields:
      - TestCategory
      - automationStatus: ["Manual", "Automated", "Semi-Automated"]
      - environment
      - priority: ["Critical", "High", "Medium", "Low", "Minor"]
      - status: ["Draft", "Active", "Inactive", "Approved"]
      - labels
    defaults:
      automationStatus: "Manual"
      priority: "High"
      status: "Draft"
      labels: ["automation", "e2e"]
  
  validate_file:
    tool: "validateTestCaseFile"
    purpose: "Validate structure before creating test cases"
    parameters:
      - filePath: "local file path"
      - fileContent: "file content as string (preferred for remote calls)"
      - fileName: "required when using fileContent"
      - note: "Prefer passing `fileContent` + `fileName` when calling remotely; do not pass local paths unless the executor runs in the same environment and has access to that path."
  
  get_test_case:
    tool: "getTestCase"
    required_fields:
      - organization
      - projectName
    optional_fields:
      - testId
      - testName
  
  update_test_case:
    tool: "updateTestCase"
    required_fields:
      - organization
      - projectName
      - testId
    optional_fields:
      - testName
      - description
      - folder
      - author
      - assigneeName
      - priority
      - status
      - tag
      - tcp
      - testType
      - startDate
      - endDate

test_execution_management:
  create_execution:
    tool: "createExecutionForTestPlan"
    required_fields:
      - organization
      - projectName
      - testPlanId
    optional_fields:
      - executionTestIds
  
  list_executions:
    tool: "listExecutionsForTestPlan"
    parameters:
      - organization
      - projectName
      - testPlanId
  
  add_test_to_execution:
    tool: "addTestCaseToExecution"
    required_fields:
      - organization
      - projectName
      - executionsId
      - testIds: "array of test case IDs"
      - includedTestType
    optional_fields:
      - iteration
  
  update_step_statuses:
    tool: "updateStepStatuses"
    required_fields:
      - organization
      - projectName
      - executionId
      - stepStatuses

automation_execution:
  create_from_cucumber:
    tool: "createAutomationExecution"
    required_fields:
      - organization
      - projectName
    file_options:
      - cucumberFilePath: "local file path"
      - cucumberFileContent: "file content as string"
      - fileName: "required when using content"
    optional_fields:
      - designation
      - fixVersion
      - report: "Default"
      - templateName: "Post-Execution Report"
      - testCaseExecutedBy
      - testExecutionAssignee
      - testExecutionDescription
      - testExecutionSummary
      - testType: "Manual"
      - tool: "Spur Validator"
      - userName

bug_management:
  create_bug:
    tool: "createBug"
    required_fields:
      - organization
      - projectName
      - summary
      - description
    optional_fields:
      - priority
      - severity
      - assignee
      - reporter
      - labels
      - environment
  
  attach_file:
    tool: "attachFileToBug"
    required_fields:
      - organization
      - projectName
      - bugId
    file_options:
      - filePath: "local file path"
      - fileUrl: "remote file URL"

best_practices:
  workflow:
    1. "Always validate organization and project access first"
    2. "Use validateTestCaseFile before bulk test case creation"
    3. "Create test plans before adding test cases"
    4. "Link requirements to test plans for traceability"
    5. "Create executions from test plans for organized testing"
    6. "Upload automation results through createAutomationExecution"
  
  file_handling:
    - "Prefer local file paths when working within IDE"
    - "Use file content strings for remote/API integration"
    - "Always provide fileName when using content strings"
    - "Validate file structure before bulk operations"

  storage_conventions:
    description: "Repository storage conventions for SpurQuality artifacts (store under repo root)."
    folders:
      - "requirements/: store requirement/acceptance docs and related files here"
      - "test-plans/: store test plan md here"
      - "test-cases/: store individual or bulk test case files (JSON/CSV/Excel/Gherkin) here"
      - "test-executions/: store test execution payloads and results here"
    filename_rules:
      - "Use lowercase file names with hyphens between words (use '-' between words)."
      - "Include a short descriptive name and a type suffix when helpful (e.g., employee-delete.feature or employee-delete.json)."
      - "When saving items retrieved from SpurQuality via MCP tools (e.g., `getStoryDetails`), start the filename with the external ID (e.g., ORNG-ST-012) with extension `.md` for story/requirement descriptions. Example: ORNG-ST-012-delete-employee.md"
      - "Preferred extensions: .feature, .json, .csv, .xlsx, .md"
    automation:
      description: "Automation expectations for MCP retrieval tools and clients"
      behavior:
        - "MCP retrieval tools SHOULD automatically save fetched artifacts to the target folder listed under `folders` (for stories: `requirements/`) by default."
        - "Saved filenames MUST follow `filename_rules` (start with external ID, hyphen, descriptive slug, prefer `.md`)."
        - "Clients SHOULD create any missing directories (e.g., `requirements/`) before saving files."
        - "If a file already exists, clients SHOULD avoid overwriting and must either append a numeric suffix, prompt the user, or fail explicitly depending on configured policy."
        - "If the client cannot perform an automatic save (e.g., running remotely or no write permission), it MUST prompt the user for an explicit destination path or return the file contents so the caller can store it."
      examples:
        - "Automatic save: `getStoryDetails` -> requirements/ORNG-ST-013.md"
        - "Prompt fallback: return content + suggested filename when automatic write isn't possible"
    examples:
      - "requirements/ORNG-ST-012.md"
      - "test-plans/leave-management-plan.md"
      - "test-cases/employee-add.csv"
      - "test-executions/automation-run-2025-12-12.json"
  
  naming_conventions:
    test_plans: "Use descriptive names with version/sprint info"
    test_cases: "Follow naming pattern: Feature_Scenario_TestType"
    folders: "Organize by feature/module hierarchy"
  
  error_handling:
    - "Check organization/project access before operations"
    - "Validate required fields before API calls"
    - "Use pagination for large result sets"
    - "Handle file upload errors gracefully"
  tool_response_handling:
    description: "Requirements for surfacing MCP/tool responses to users"
    rules:
      - "Always present a concise summary of results to the user after a tool call that performs create/update/delete actions (example: number created, number failed)."
      - "When the tool returns resource identifiers or URLs (e.g., created test case links), include those links explicitly in the assistant response so the user can follow them."
      - "If errors occur during import, show the error details (row numbers, messages) rather than only logging them internally."
      - "Do not assume the caller can inspect raw tool logs; the assistant must surface actionable output and next steps."

integration_patterns:
  with_playwright:
    - "Create test plans for feature development"
    - "Link test cases to user stories/requirements"
    - "Upload Cucumber JSON results after automation runs"
    - "Attach screenshots/videos to bug reports"
  
  with_ci_cd:
    - "Create automation executions from pipeline results"
    - "Update test case statuses based on automation outcomes"
    - "Generate reports using templateName options"
    - "Link build numbers through fixVersion field"
  
  data_flow:
    1. "Create/retrieve test plan"
    2. "Add test cases (manual or from files)"
    3. "Link requirements for traceability"
    4. "Create execution for testing cycle"
    5. "Upload automation results"
    6. "Attach evidence to bugs/issues"

common_operations:
  daily_workflow:
    - "Check existing test plans: getTestPlan"
    - "Add new test cases: addTestCasesToTestPlan" 
    - "Create execution: createExecutionForTestPlan"
    - "Upload results: createAutomationExecution"
  
  bulk_operations:
    - "Validate files first: validateTestCaseFile"
    - "Create test cases in batches: createTestCaseFromFile"
    - "Use pagination for large datasets"
  
  maintenance:
    - "Remove obsolete test cases: removeTestCaseFromTestPlan"
    - "Update test plan details as needed"
    - "Organize test cases by folders/categories"

error_prevention:
  required_checks:
    - "Verify organization/project exists"
    - "Check test plan exists before adding cases"
    - "Validate file format before upload"
    - "Ensure test case IDs are valid"
  
  common_mistakes:
    - "Missing organization/projectName in requests"
    - "Invalid date formats (use YYYY-MM-DD)"
    - "Wrong requirement type values"
    - "File content without fileName parameter"
```