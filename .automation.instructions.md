---
name: playwright_test_automation_java
description: Guidelines for QA automation projects using Playwright, Cucumber BDD, Java, TestNG and AI-assisted testing at SpurQLabs
applyTo: "**/*.java,**/*.feature,**/*.md"
---

# Playwright Test Automation Guidelines

```yaml
core_tech_stack:
  playwright:
    version: "latest stable"
    purpose: "E2E browser automation"
    browsers: ["chromium", "firefox", "webkit"]
  
  framework:
    name: "Cucumber BDD"
    files: "Gherkin .feature files"
    automation: "generate step definitions automatically"
  
  language:
    name: "Java"
    version: "21.0.9"
    build_tools: ["Maven", "Gradle"]
    testing_framework: "TestNG"
  
  architecture:
    pattern: "Page Object Model (POM)"
    enforcement: "Strict"
    location: "src/test/java/pages/"
    requirements: "classes exporting locators and methods"
  
  test_data:
    location: "src/test/resources/TestData/"
    format: "JSON"
    rule: "avoid hardcoding in feature files or step definitions or POMs"
  
  configuration:
    file: "src/test/resources/config.json"
    contents: ["URLs", "credentials", "timeouts"]
  
  utilities:
    location: "src/test/java/utils/"
    includes: ["ConfigReader", "Logger", "Retry", "captureScreenshots"]

coding_standards:
  code_style:
    verbosity: "Concise code"
    documentation: "JavaDoc for methods only"
  
  locators:
    preference_order:
      1: "data-testid"
      2: "data-*"
      3: "[role]"
      4: "aria-*"
    avoid: ["XPath", "CSS selectors"]
  
  assertions:
    framework: "TestNG Assert"
    requirement: "always include timeouts"
  
  naming:
    describe_blocks: "match user stories"
    steps: "mirror Gherkin"
  
  configuration_access:
    method: "ConfigReader.getConfig()"
    rule: "never hardcode"

project_structure:
  root:
    src:
      test:
        java:
          pages: "Page Objects"
          steps: "Cucumber step definitions"
          tests: "Test runners"
          utils: "ConfigReader, Logger, RetryUtils, etc."
        resources:
          config.json: "App URLs, credentials, timeouts"
          features: ".feature files"
          data: "Test data JSON/YAML"
          cucumber.json: "Cucumber configuration"
    pom.xml: "Maven (required)"
    playwright.config.java: "Playwright configuration"
    .instructions.md: "This file"
  
  requirements:
    - "Always maintain this Maven structure"
    - "Add playwright-maven-plugin"

best_practices:  
  cicd:
    requirement: "Auto-add GitHub Actions workflow for mvn test"
  
  reliability:
    techniques:
      - "page.waitForSelector"
      - "retry logic"
      - "soft assertions"
    goal: "Reduce flakiness"

common_pitfalls:
  avoid:
    - description: "No inline test data"
      solution: "externalize to JSON in resources"
    - description: "Never use page.pause() or breakpoints"
      context: "production tests"
    - description: "Avoid brittle locators"
      solution: "prefer stable attributes"
    - description: "Config aligns to client environments"
      environments: ["dev", "staging", "prod"]
      context: "SpurQLabs"

generation_instructions:
  when_asked: "add tests for X"
  steps:
    1: "Create Gherkin in .feature"
    2: "Generate POM methods with @FindBy"
    3: "Write Cucumber step defs with @Given/@When/@Then"
    4: "Add test data in JSON files"
    5: "Update pom.xml dependencies if needed"
    6: "Suggest GitHub Actions YAML snippet"
  
  output_requirement: "Always output full file contents with proper Java imports"
```